PKG=`pkg-config --cflags --libs protobuf`
#G11=g++ `pkg-config --cflags --libs protobuf` -g -DDEBUG
#G11=g++ --std=c++11 `pkg-config --cflags --libs protobuf` -g -DDEBUG

G11=g++ --std=c++11 `pkg-config --cflags --libs protobuf` -g -DTIMELOG
#G11=g++ --std=c++11 `pkg-config --cflags --libs protobuf` -g -O2 -DTIMELOG
#G11=g++ --std=c++11 `pkg-config --cflags --libs protobuf` 
EXE_FILE=thro_mobile
PRO_FILE=main.o taskpool.o threadpool.o redisPool.o redisPoolManager.o pubKeyManager.o connectorManager.o zeromqConnect.o threadpoolmanager.o adConfig.o throttle.o  CommonMessage.pb.o throttleManager.o bidderManager.o bcManager.o\
 AdVastRequestTemplate.pb.o AdBidderResponseTemplate.pb.o managerProto.pb.o MobileAdRequest.pb.o
$(EXE_FILE): *.pb.c ${PRO_FILE}
	$(G11) -o $(EXE_FILE) $(PRO_FILE) $(PKG)  -lhiredis -lzmq -lpthread -levent
*.pb.c: *.proto
#	protoc --cpp_out=. *.proto
main.o: main.cpp
	$(G11) -c main.cpp
#redisClient.o: redisClient.cpp redisClient.h
#	$(G11) -c redisClient.cpp
redisPool.o: redisPool.cpp redisPool.h
	$(G11) -c redisPool.cpp
redisPoolManager.o: redisPoolManager.cpp redisPoolManager.h
	$(G11) -c redisPoolManager.cpp
zeromqConnect.o: zeromqConnect.cpp zeromqConnect.h
	$(G11) -c zeromqConnect.cpp
CommonMessage.pb.o: CommonMessage.pb.cc CommonMessage.pb.h
	$(G11) -c CommonMessage.pb.cc
AdVastRequestTemplate.pb.o: AdVastRequestTemplate.pb.cc AdVastRequestTemplate.pb.h
	$(G11) -c AdVastRequestTemplate.pb.cc 
AdBidderResponseTemplate.pb.o: AdBidderResponseTemplate.pb.cc AdBidderResponseTemplate.pb.h
	$(G11) -c AdBidderResponseTemplate.pb.cc
MobileAdRequest.pb.o: MobileAdRequest.pb.cc MobileAdRequest.pb.h
	$(G11) -c MobileAdRequest.pb.cc
managerProto.pb.o: managerProto.pb.cc managerProto.pb.h
	$(G11) -c managerProto.pb.cc
adConfig.o: adConfig.cpp adConfig.h
	$(G11) -c adConfig.cpp
throttle.o: throttle.cpp throttle.h
	$(G11) -c throttle.cpp 
taskpool.o: taskpool.cpp taskpool.h
	$(G11) -c taskpool.cpp
threadpool.o: threadpool.cpp threadpool.h
	$(G11) -c threadpool.cpp
threadpoolmanager.o: threadpoolmanager.cpp threadpoolmanager.h
	$(G11) -c threadpoolmanager.cpp
throttleManager.o: throttleManager.cpp throttleManager.h
	$(G11) -c throttleManager.cpp
bidderManager.o: bidderManager.cpp bidderManager.h
	$(G11) -c bidderManager.cpp
bcManager.o: bcManager.cpp bcManager.h
	$(G11) -c bcManager.cpp
connectorManager.o: connectorManager.cpp connectorManager.h
	$(G11) -c connectorManager.cpp
pubKeyManager.o: pubKeyManager.cpp pubKeyManager.h
	$(G11) -c pubKeyManager.cpp
clean:
	rm  *.o $(EXE_FILE)
